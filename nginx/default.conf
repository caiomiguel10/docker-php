server {
    # Escuta na porta 80 (padrão HTTP)
    listen 80;

    # Define o nome do servidor como localhost (pode ser alterado para um domínio real)
    server_name localhost;

    # Define o diretório raiz onde os arquivos da aplicação estão localizados
    root /var/www/html;

    # Define a ordem de prioridade para carregar arquivos index automaticamente
    index index.php index.html index.htm;

    # Configuração para requisições na raiz "/"
    location / {
        # Primeiro, tenta carregar o arquivo exato solicitado ($uri)
        # Se não encontrar, tenta uma pasta com o mesmo nome ($uri/)
        # Se ainda não encontrar, redireciona para index.php e passa os parâmetros da URL ($query_string)
        try_files $uri $uri/ /index.php?$query_string;
    }
        
    # Configuração para processar arquivos PHP
    location ~ \.php$ {
        # Inclui os parâmetros padrão do FastCGI (necessários para comunicação com PHP-FPM)
        include fastcgi_params;

        # Envia a requisição para o PHP-FPM rodando no container "php" na porta 9000
        fastcgi_pass php:9000;

        # Define index.php como o arquivo padrão caso não seja especificado
        fastcgi_index index.php;

        # Define o caminho do arquivo PHP que será executado pelo PHP-FPM
        fastcgi_param SCRIPT_FILENAME $document_root$fastcgi_script_name;
    }

    # Bloqueia o acesso a arquivos ocultos (como .htaccess) por segurança
   location / {
    try_files $uri $uri/ /index.php?$query_string;
    }

}
